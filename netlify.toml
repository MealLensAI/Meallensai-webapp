[build]
  command = "npm run build"
  publish = "dist"

# Proxy API calls to the backend (must be first and most specific)
[[redirects]]
  from = "/api/*"
  to = "https://new-backend-08j8.onrender.com/:splat"
  status = 200
  force = true
  headers = {X-From = "Netlify"}

# Handle the landing page
[[redirects]]
  from = "/"
  to = "/landing.html"
  status = 200

# Handle specific React app routes
[[redirects]]
  from = "/app/*"
  to = "/index.html"
  status = 200

[[redirects]]
  from = "/login"
  to = "/index.html"
  status = 200

[[redirects]]
  from = "/signup"
  to = "/index.html"
  status = 200

[[redirects]]
  from = "/ai-kitchen"
  to = "/index.html"
  status = 200

[[redirects]]
  from = "/detected"
  to = "/index.html"
  status = 200

[[redirects]]
  from = "/planner"
  to = "/index.html"
  status = 200

[[redirects]]
  from = "/history/*"
  to = "/index.html"
  status = 200

[[redirects]]
  from = "/payment"
  to = "/index.html"
  status = 200

[[redirects]]
  from = "/profile"
  to = "/index.html"
  status = 200

[[redirects]]
  from = "/settings"
  to = "/index.html"
  status = 200

# Catch-all for other React routes (must come last)
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200 